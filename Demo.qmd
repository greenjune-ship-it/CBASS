---
title: "CBASS Demo"
author: "Yulia Iakovleva"
format: html
editor: visual
---

## About CBASS

CBASS allows you to process CBASS data. To learn more about CBASS see <https://onlinelibrary.wiley.com/doi/10.1111/gcb.15148>.

## Install CBASS

```{r install-cbass}
if(!require(devtools)){
    install.packages("devtools")
}

devtools::install_github("greenjune-ship-it/CBASS", quiet = TRUE, force = TRUE)
```

## Load Packages

```{r library-packages}
library(CBASS)
```

## Preprocess and Validate Data

Load the provided example data set:

```{r load-data}
data("cbass_dataset")
head(cbass_dataset)
```

Make your data tidy and validate.

```{r process-and-validate-cbass-dataset}
cbass_dataset <- preprocess_dataset(cbass_dataset)
validate_cbass_dataset(cbass_dataset)
```

## Explore ED50

First you need to decide which grouping property you want to use. For example, I want to merge `Site` , `Condition`, `Species`, `Genotype` as one merged grouping property:

```{r fititng-dose-responce-models}
# load_all()
grouping_properties <- c("Site", "Condition", "Species", "Genotype")
drm_formula <- "PAM ~ Temperature"
models <- fit_drms(cbass_dataset, grouping_properties, drm_formula)

ed50 <- get_ed50_by_grouping_property(models)
```
